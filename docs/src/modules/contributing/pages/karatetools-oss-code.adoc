The following sections will describe the *code structure*, to be able to *find easily the location of the code to be added or modified*.

* 👩‍💻 xref:#karatetools-oss-archetype[karatetools-oss-archetype]
* 👩‍💻 xref:#karatetools-oss-clients[karatetools-oss-clients]
* 👩‍💻 xref:#karatetools-oss-generators[karatetools-oss-generators]
* 👩‍💻 xref:#karatetools-oss-runner[karatetools-oss-runner]
* 👩‍💻 xref:#karatetools-oss-starter[karatetools-oss-starter]
* 👩‍💻 xref:#karatetools-oss-boot[karatetools-oss-boot]
* 👩‍💻 xref:#karatetools-oss-openapi-test[karatetools-oss-openapi-test]

The tests to be executed for the `code` modules are:

* *Unit & Mutation Tests*:
** Unit tests are used to test the classes and methods of the `code` modules.
** Mutation tests are used to verify that the unit tests are effective.
* *Integration tests*:
** Integration tests are used to test the `code` modules together with external dependencies.
** These tests are supported by a set of `docker containers` located in `code/src/test/resources/compose`

IMPORTANT: Unit, mutation and integration tests are required as status checks in the CI/CD pipeline pull request approval process. The *level of coverage for each type of test must reach at least the defined threshold*.

NOTE: Karate tests are defined in the `e2e/karate` folder and are executed in the `karatetools-oss-karate-test` module.

.Tests Execution (Locally)
[cols="1,3,2,2"]
|===
|test|command|report|verification

|unit
a|
`cd code`

`mvn clean verify -DskipITs -DfailIfNoTests=false -Dmaven.test.failure.ignore=false`
|`code/jacoco-report-aggregate/target/site/jacoco-aggregate/index.html`
|all tests pass and the *code coverage* generated by *unit* tests is at least *{karatetools-unit-coverage-threshold}*

|mutation
a|
`cd code`

`mvn clean verify pitest:mutationCoverage pitest:report-aggregate-module -DskipITs`
|`code/target/pit-reports/index.html`
|all tests pass and the *mutation coverage* is at least *{karatetools-mutation-coverage-threshold}*

|integration
a|
`cd code`

`mvn clean verify -DskipUTs -DfailIfNoTests=false -Dmaven.test.failure.ignore=false`
|`code/jacoco-report-aggregate/target/site/jacoco-aggregate-it/index.html`
|all tests pass and the *code coverage* generated by *integration* tests is at least *{karatetools-integration-coverage-threshold}*
|===

.Tests Execution (Github)
[cols="1,3,2,2"]
|===
|test|command|report|verification

|unit
a|* workflow dispatch
* automatically on PR
|workflow execution reports
|automatically on workflow execution

|mutation
a|* workflow dispatch
* automatically on PR
|workflow execution reports
|automatically on workflow execution

|integration
a|* workflow dispatch
* automatically on PR
|workflow execution reports
|automatically on workflow execution

|===
